var tweets_a = [];
var tweets_b = [];
tweets_a[0] = '<span style="color:#FF0000;">jgg<span style="color:#0055FF;">hjsd</span></span><span style="color:#0055FF;">fa</span><br /><a href="http://www.baidu.com">sdf</a>a<br /><br /><img src="http://192.168.101.99:81/pic/get/395800b0a9cfaec3dd71487ae0e4bb9e.L" ex_image="true" onresizestart="cannot_resize_img(event);" /><br />adsfewfsd<br />';

tweets_b[0] = '<p><span style="color:#FF0000;">jgg</span>'+
							'<span style="color:#0055FF;">hjsd</span>'+
							'<span style="color:#0055FF;">fa</span><br />'+
							'<a href="http://www.baidu.com">sdf</a>a<br /><br />'+
							'<img src="http://192.168.101.99:81/pic/get/395800b0a9cfaec3dd71487ae0e4bb9e.L" ex_image="true" onresizestart="cannot_resize_img(event);" /><br />adsfewfsd<br /></p>';
/////////
tweets_a[1] = '<p><span style="font-size:medium"><span style="color:#333399"><span style="font-family:楷体_gb2312"><span style="color:#000000; font-size:18px">我只是个女孩。</span><br /><span style="color:#000000; font-size:18px">我希望有人疼，有人爱，有人包容，有人抱着我睡，有人让我撒娇，有人可以吃我做的饭，有人可以夸我乖，有人能陪在我身边，有人能过马路的时候拉着我的手，有人能给我安全。~有人喜欢带我逛街，穿高跟鞋走累了都会有人背。~有人乐意带我去他去的各种场合，并把我介绍给他的朋友们~</span><br /><span style="color:#000000; font-size:18px">我只是个女孩。</span><br /><span style="color:#000000; font-size:18px">我希望有人关心，有人保护，有人会记得每天告诉我晚安，有人告诉我他对我很安心。有人记得我们一起过去的点滴，有人绝对不把我们之间的承诺作儿戏。有人告诉我，照顾我，他一点也不累。</span><br /><span style="color:#000000; font-size:18px">我只是个女孩。</span><br /><span style="color:#000000; font-size:18px">我希望有人认同我，有人认真思考然后告诉我他觉得我的话其实也有道理，在我做了点可爱的事情以后摸摸我的头鼓励我做的好。~有人不轻易夸我，也不吝啬使劲夸我。</span><br /><span style="color:#000000; font-size:18px">我只是个女孩。</span><br /><span style="color:#000000; font-size:18px">我希望能有人惦记我，在我郁闷大哭的时候把我的头按在胸膛哭够了问我怎么了。</span><br /><span style="color:#000000; font-size:18px">我希望有人告诉我，有时候想念我令他难受。</span><br /><span style="color:#000000; font-size:18px">我娇气，不放纵，不说谎。不会无理取闹，不会缠着他给我买东西。偶然一条短信告诉我他想我，我就知足。</span><br /><span style="color:#000000; font-size:18px">我不演戏，我什么都相信。我说过的话都算数，所以，对我说过的，别忘记。请别忘记。</span><br /><span style="color:#000000; font-size:18px">我会尽量变得更好看，相信海誓山盟。相信自己配的上自由和幸福。</span><br /><span style="color:#000000; font-size:18px">我只是个女孩。</span><br /><span style="color:#000000; font-size:18px">我喜欢诚实的人。因为我诚实。</span><br /><span style="color:#000000; font-size:18px">如果我说我们不会再见了，我一定会躲开你。也许我还会在街边见到你，你又会如何回忆我。我会放过自己，放过压抑，放过附身的记忆。往事通缉，孤单侵袭，习惯就可以。</span><br /><span style="color:#000000; font-size:18px">如果我的想念喷薄而出，我不会告诉你。尽管如此，那些思念依然值得我珍惜。</span><br /><span style="color:#000000; font-size:18px">如果我相信你。我会告诉你，我可以不勇敢吗。那些勇敢的人都未必幸福，因为是不幸让他们勇敢。</span><br /><span style="color:#000000; font-size:18px">~我喜欢被勇敢的你守护着，因为有你，所以我不需要勇敢。</span></span><br /></span></span><span style="font-size:medium"><span style="color:#333399"><span><span style="font-size:12px">我只是个女孩。</span><br /><span style="font-size:12px">我会难过，但是不会自甘堕落。 </span><br /><span style="font-size:12px">我会伤心，但是不会伤心太久。 </span><br /><span style="font-size:12px">也许我会遇见一个微笑的魔鬼，他将指引我，给我奇异的火花，他将短暂的照亮我的心灵。他会交给我幸福的预感，却拒绝给我一点点幸福。</span><span style="font-size:12px">也许我会遇见一个烂醉的天使，他神经质地微笑，给我看他掉了毛的翅膀，但是上面残存的每一片，都是能令我撑死的幸福。</span></span></span></span></p><p><span style="font-family:楷体_gb2312; color:#330033; font-size:large"><font size="4"><span style="font-family:楷体_gb2312; color:#330033; font-size:12px">多年后</span></font></span></p><p><span style="font-family:楷体_gb2312; color:#330033; font-size:large"><font size="4"><span style="font-family:楷体_gb2312; color:#330033; font-size:12px">发现自己已经是个</span></font></span></p><p><span style="font-family:楷体_gb2312; color:#330033; font-size:large"><font size="4"><span style="font-family:楷体_gb2312; color:#330033; font-size:12px">心怀感伤</span></font></span></p><p><span style="font-family:楷体_gb2312; color:#330033; font-size:large"><font size="4"><span style="font-family:楷体_gb2312; color:#330033; font-size:12px">却可以</span></font></span></p><p><span style="font-family:楷体_gb2312; color:#330033; font-size:large"><font size="4"><span style="font-family:楷体_gb2312; color:#330033; font-size:12px">甘心承担</span></font></span></p><p><span style="font-family:楷体_gb2312; color:#330033; font-size:large"><font size="4"><span style="font-family:楷体_gb2312; color:#330033; font-size:12px">的女子</span></font></span></p><p><span style="font-family:楷体_gb2312; color:#330033; font-size:large"><font size="4"><span style="font-family:楷体_gb2312; color:#330033; font-size:12px">躲在某一时间</span><br /><br /><span style="font-family:楷体_gb2312; color:#330033; font-size:12px">想念一段时光的掌纹</span><br /><br /><span style="font-family:楷体_gb2312; color:#330033; font-size:12px">躲在某一地点</span><br /><br /><span style="font-family:楷体_gb2312; color:#330033; font-size:12px">想念一个站在来路也站在去路的</span><br /><br /><span style="font-family:楷体_gb2312; color:#330033; font-size:12px">让我牵挂的人</span></font></span></p><p align="center">&nbsp;</p>'

tweets_b[1] = '<p><span style="font-size:18px;">我只是个女孩。</span><br />'+
              '<span style="font-size:18px;">我希望有人疼，有人爱，有人包容，有人抱着我睡，有人让我撒娇，有人可以吃我做的饭，有人可以夸我乖，有人能陪在我身边，有人能过马路的时候拉着我的手，有人能给我安全。~有人喜欢带我逛街，穿高跟鞋走累了都会有人背。~有人乐意带我去他去的各种场合，并把我介绍给他的朋友们~</span><br />'+
              '<span style="font-size:18px;">我只是个女孩。</span><br />'+
              '<span style="font-size:18px;">我希望有人关心，有人保护，有人会记得每天告诉我晚安，有人告诉我他对我很安心。有人记得我们一起过去的点滴，有人绝对不把我们之间的承诺作儿戏。有人告诉我，照顾我，他一点也不累。</span><br />'+
              '<span style="font-size:18px;">我只是个女孩。</span><br />'+
              '<span style="font-size:18px;">我希望有人认同我，有人认真思考然后告诉我他觉得我的话其实也有道理，在我做了点可爱的事情以后摸摸我的头鼓励我做的好。~有人不轻易夸我，也不吝啬使劲夸我。</span><br />'+
              '<span style="font-size:18px;">我只是个女孩。</span><br />'+
              '<span style="font-size:18px;">我希望能有人惦记我，在我郁闷大哭的时候把我的头按在胸膛哭够了问我怎么了。</span><br />'+
              '<span style="font-size:18px;">我希望有人告诉我，有时候想念我令他难受。</span><br />'+
              '<span style="font-size:18px;">我娇气，不放纵，不说谎。不会无理取闹，不会缠着他给我买东西。偶然一条短信告诉我他想我，我就知足。</span><br />'+
              '<span style="font-size:18px;">我不演戏，我什么都相信。我说过的话都算数，所以，对我说过的，别忘记。请别忘记。</span><br />'+
              '<span style="font-size:18px;">我会尽量变得更好看，相信海誓山盟。相信自己配的上自由和幸福。</span><br />'+
              '<span style="font-size:18px;">我只是个女孩。</span><br />'+
              '<span style="font-size:18px;">我喜欢诚实的人。因为我诚实。</span><br />'+
              '<span style="font-size:18px;">如果我说我们不会再见了，我一定会躲开你。也许我还会在街边见到你，你又会如何回忆我。我会放过自己，放过压抑，放过附身的记忆。往事通缉，孤单侵袭，习惯就可以。</span><br />'+
              '<span style="font-size:18px;">如果我的想念喷薄而出，我不会告诉你。尽管如此，那些思念依然值得我珍惜。</span><br />'+
              '<span style="font-size:18px;">如果我相信你。我会告诉你，我可以不勇敢吗。那些勇敢的人都未必幸福，因为是不幸让他们勇敢。</span><br />'+
              '<span style="font-size:18px;">~我喜欢被勇敢的你守护着，因为有你，所以我不需要勇敢。</span><br />'+
              '<span style="color:#333399;">我只是个女孩。</span><br />'+
              '<span style="color:#333399;">我会难过，但是不会自甘堕落。 </span><br />'+
              '<span style="color:#333399;">我会伤心，但是不会伤心太久。 </span><br />'+
              '<span style="color:#333399;">也许我会遇见一个微笑的魔鬼，他将指引我，给我奇异的火花，他将短暂的照亮我的心灵。他会交给我幸福的预感，却拒绝给我一点点幸福。</span>'+
              '<span style="color:#333399;">也许我会遇见一个烂醉的天使，他神经质地微笑，给我看他掉了毛的翅膀，但是上面残存的每一片，都是能令我撑死的幸福。</span></p>'+
              '<p><span style="color:#330033;">多年后</span></p>'+
              '<p><span style="color:#330033;">发现自己已经是个</span></p>'+
              '<p><span style="color:#330033;">心怀感伤</span></p>'+
              '<p><span style="color:#330033;">却可以</span></p>'+
              '<p><span style="color:#330033;">甘心承担</span></p>'+
              '<p><span style="color:#330033;">的女子</span></p>'+
              '<p><span style="color:#330033;">躲在某一时间</span><br /><br />'+
              '<span style="color:#330033;">想念一段时光的掌纹</span><br /><br />'+
              '<span style="color:#330033;">躲在某一地点</span><br /><br />'+
              '<span style="color:#330033;">想念一个站在来路也站在去路的</span><br /><br />'+
              '<span style="color:#330033;">让我牵挂的人</span></p>'+
							'<p style="text-align:center;">&nbsp;</p>';
////////
tweets_a[2] = '<p><span style="color:#1f9999; font-size:18px">\u8d70\uff0c\u8ddf\u6211\u53bb\u897f\u85cf\u3002</span></p><p><a style="color:#1f9999; text-decoration:underline" href="http://blog.renren.com/blog/261858561/817220559"><span style="color:#1f9999">http://blog.renren.com/blog/261858561/817220559</span></a></p>';
							
tweets_b[2] = '<p><span style="font-size:18px;color:#1F9999;">\u8d70\uff0c\u8ddf\u6211\u53bb\u897f\u85cf\u3002</span></p>'+
							'<p><a href="http://blog.renren.com/blog/261858561/817220559"><span style="color:#1F9999;">http://blog.renren.com/blog/261858561/817220559</span></a></p>';
/////////							
tweets_a[3] = 'kjgjhghjg<br /><a href="http://hjg">hjgj<img src="http://192.168.101.99:81/pic/get/66f0c31d9fad552886c934b5902033d0.L" onresizestart="cannot_resize_img(event);" ex_image="true" />hg</a><br /><br />';

tweets_b[3] = '<p>kjgjhghjg<br />' +
							'<a href="http://hjg">hjgj</a>'+
							'<img src="http://192.168.101.99:81/pic/get/66f0c31d9fad552886c934b5902033d0.L" onresizestart="cannot_resize_img(event);" ex_image="true" />'+
							'hg<br /><br /></p>';
///////////
tweets_a[4] = 'hj<strong>gjhghjg</strong><strong>jhgjg<br /></strong>';
tweets_b[4] = '<p>hj<span style="font-weight:bolder;">gjhghjg</span><span style="font-weight:bolder;">jhgjg</span><br /></p>';
//////////
tweets_a[5] = '<p><span style="color:#8c8c8c">就算天涯海角 <br />都可能覆蓋 </span></p><p><span style="color:#8c8c8c">我们难道没信心</span></p><p><span style="color:#8c8c8c">这样爱..</span><span style="color:#8c8c8c"><br /></span></p>';
tweets_b[5] = '<p><span style="color:#8C8C8C;">就算天涯海角 </span><br /><span style="color:#8C8C8C;">都可能覆蓋 </span></p><p><span style="color:#8C8C8C;">我们难道没信心</span></p><p><span style="color:#8C8C8C;">这样爱..</span><br /></p>';
//////////
tweets_a[6] = '<p class="MsoNormal" style="margin:0cm 0cm 0px; text-indent:28px; mso-char-indent-count:2.0;"><span style="color:#000000;font-size:16px"><span style="font-family:calibri">你总是怪我，凭什么凭什么凭什么，无论任何事情。例如我走得慢，你就会毫不客气地来一句：短腿。穿着高跟鞋，能跟你如牛似虎的身子比吗？再说我走得累了，你没有心疼，只是嫌弃地：真是娇生惯养。呵，这是爱吗？这是珍惜我的意思吗？现在，我千里迢迢跑来，你仍是怪我，说我为什么没有和你商量，说我太冲动。谁没事儿深更半夜花一百块钱搭黑车过来，在临近关寝室门的时候冲出去，还翻墙出校门，谁吃饱了做这么些？噢，对了，你还说过她，她多么优雅自信，成熟范不适合我，应改走可爱路线。你知道吗？当看见你空间里特别关心那一栏，我都会想，你也许会怪我：你的动态怎么那么多，看看人家，一条都没有。呵呵，我的动态，一个月都难得有一次。（什么都有毛病，为什么呢？</span><span style="font-family:calibri">He is not that into you.</span><span style="font-family:calibri">）</span></span></p>';
tweets_b[6] = '<p>　　你总是怪我，凭什么凭什么凭什么，无论任何事情。例如我走得慢，你就会毫不客气地来一句：短腿。穿着高跟鞋，能跟你如牛似虎的身子比吗？再说我走得累了，你没有心疼，只是嫌弃地：真是娇生惯养。呵，这是爱吗？这是珍惜我的意思吗？现在，我千里迢迢跑来，你仍是怪我，说我为什么没有和你商量，说我太冲动。谁没事儿深更半夜花一百块钱搭黑车过来，在临近关寝室门的时候冲出去，还翻墙出校门，谁吃饱了做这么些？噢，对了，你还说过她，她多么优雅自信，成熟范不适合我，应改走可爱路线。你知道吗？当看见你空间里特别关心那一栏，我都会想，你也许会怪我：你的动态怎么那么多，看看人家，一条都没有。呵呵，我的动态，一个月都难得有一次。（什么都有毛病，为什么呢？He is not that into you.）</p>'
/////////
tweets_a[7] = '<h1>asdf</h1>zxcv';
tweets_b[7] = '<p><span style="font-size:18px;">asdf</span><br />zxcv</p>';
/////////
tweets_a[8] = '<div align="center"><strong>Brothers, let us come together </strong></div>';
tweets_b[8] = '<p style="text-align:center;"><span style="font-weight:bolder;">Brothers, let us come together </span></p>';
////////
tweets_a[9] = "<strong><span style=\"font-size:18px; color:#FF0000; \">\u8fd9\u4e24\u5929\u7a81\u7136\u53d1\u73b0\u53d6\u4e86\u94a2\u9489\u7684\u80f3\u818a\u53ef\u4ee5\u652f\u6491\u81ea\u5df1\u7684\u8eab\u4f53\u4e86\u3002</span></strong><div><font color=\"#ff0000\" size=\"4\"><b><span style=\"font-size:18px; \">\u770b\u6765\u6bcf\u5929\u7684\u81ea\u6211\u5eb7\u590d\u953b\u70bc\u8fd8\u662f\u5f88\u6709\u6548\u7684\u3002</span><br /></b></font><div><strong><span style=\"font-size:18px; color:#FF0000; \">\u8bf4\u662f\u4f24\u7b4b\u52a8\u9aa8\u4e00\u767e\u5929\uff0c\u5176\u5b9e\u662f\u75c5\u6765\u5982\u5c71\u5012\uff0c\u75c5\u597d\u5982\u62bd\u4e1d\u3002</span></strong></div><div><strong><span style=\"font-size:18px; color:#FF0000; \">\u8981\u60f3\u5b8c\u5168\u6062\u590d\u662f\u9700\u8981\u76f8\u5f53\u957f\u7684\u65f6\u95f4\u7684\u3002</span></strong></div></div>";
tweets_b[9] = '<p><span style="font-size:18px;color:#FF0000;font-weight:bolder;">\u8fd9\u4e24\u5929\u7a81\u7136\u53d1\u73b0\u53d6\u4e86\u94a2\u9489\u7684\u80f3\u818a\u53ef\u4ee5\u652f\u6491\u81ea\u5df1\u7684\u8eab\u4f53\u4e86\u3002</span></p>'+
              '<p><span style="font-size:18px;color:#FF0000;font-weight:bolder;">\u770b\u6765\u6bcf\u5929\u7684\u81ea\u6211\u5eb7\u590d\u953b\u70bc\u8fd8\u662f\u5f88\u6709\u6548\u7684\u3002</span><br /></p>'+
              '<p><span style="font-size:18px;color:#FF0000;font-weight:bolder;">\u8bf4\u662f\u4f24\u7b4b\u52a8\u9aa8\u4e00\u767e\u5929\uff0c\u5176\u5b9e\u662f\u75c5\u6765\u5982\u5c71\u5012\uff0c\u75c5\u597d\u5982\u62bd\u4e1d\u3002</span></p>'+
              '<p><span style="font-size:18px;color:#FF0000;font-weight:bolder;">\u8981\u60f3\u5b8c\u5168\u6062\u590d\u662f\u9700\u8981\u76f8\u5f53\u957f\u7684\u65f6\u95f4\u7684\u3002</span></p>';
//////////
tweets_a[10] = '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为你我用了半年的积蓄飘洋过海的来看你 \r\n<div class="spctrl"></div>　　为了这次相聚 \r\n<div class="spctrl"></div>　　我连见面时的呼吸都曾反复练习 \r\n<div class="spctrl"></div>　　言语从来没能将我的情意表达千万分之一 \r\n<div class="spctrl"></div>　　为了这个遗憾　 \r\n<div class="spctrl"></div>　　我在夜里想了又想不肯睡去 \r\n<div class="spctrl"></div>　　记忆它总是慢慢的累积　 \r\n<div class="spctrl"></div>　　在我心中无法抹去 \r\n<div class="spctrl"></div>　　为了你的承诺　 \r\n<div class="spctrl"></div>　　我在最绝望的时候都忍着不哭泣 \r\n<div class="spctrl"></div>　　陌生的城市啊　 \r\n<div class="spctrl"></div>　　熟悉的角落里 \r\n<div class="spctrl"></div>　　也曾彼此安慰 \r\n<div class="spctrl"></div>　　也曾相拥叹息　 \r\n<div class="spctrl"></div>　　不管将会面对什么样的结局 \r\n<div class="spctrl"></div>　　在漫天风沙里望着你远去　 \r\n<div class="spctrl"></div>　　我竟悲伤得不能自己 \r\n<div class="spctrl"></div>　　多盼能送君千里直到山穷水尽　 \r\n<div class="spctrl"></div>　　一生和你相依';
tweets_b[10] = '<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;为你我用了半年的积蓄飘洋过海的来看你 \r\n</p><p>　　为了这次相聚 \r\n</p><p>　　我连见面时的呼吸都曾反复练习 \r\n</p><p>　　言语从来没能将我的情意表达千万分之一 \r\n</p><p>　　为了这个遗憾　 \r\n</p><p>　　我在夜里想了又想不肯睡去 \r\n</p><p>　　记忆它总是慢慢的累积　 \r\n</p><p>　　在我心中无法抹去 \r\n</p><p>　　为了你的承诺　 \r\n</p><p>　　我在最绝望的时候都忍着不哭泣 \r\n</p><p>　　陌生的城市啊　 \r\n</p><p>　　熟悉的角落里 \r\n</p><p>　　也曾彼此安慰 \r\n</p><p>　　也曾相拥叹息　 \r\n</p><p>　　不管将会面对什么样的结局 \r\n</p><p>　　在漫天风沙里望着你远去　 \r\n</p><p>　　我竟悲伤得不能自己 \r\n</p><p>　　多盼能送君千里直到山穷水尽　 \r\n</p><p>　　一生和你相依</p>';
///////////
tweets_a[10] = '<p><span style="font:12px/20px arial, helvetica, sans-serif; color:#777777; text-transform:none; text-indent:0px; letter-spacing:normal; word-spacing:0px; white-space:normal; orphans:2; widows:2; background-color:#FBFBFB; -webkit-text-size-adjust:auto; -webkit-text-decorations-in-effect:none; -webkit-text-stroke-width:0px;" class="Apple-style-span"><em style="font-style:normal; font-weight:normal;"><span style="font:18px/20px arial, helvetica, sans-serif; color:#777777; text-transform:none; text-indent:0px; letter-spacing:normal; word-spacing:0px; white-space:normal; orphans:2; widows:2; font-size-adjust:none; font-stretch:normal; background-color:#FBFBFB; -webkit-text-size-adjust:auto; -webkit-text-decorations-in-effect:none; -webkit-text-stroke-width:0px;">在第一次选择坚强的时候，一定要想清楚：你是否做好了承受一切的准备。因为一旦你选择了坚强，即使只是假装的，你也必须一直坚持下去。因为你曾经的坚强会让人以为即使再大的苦，你也撑得住。</span></em></span></p><p><img onresizestart="cannot_resize_img(event);" src="http://pic.ibooloo.com/pic/get/1bcb5e698ed9612d001467cc74ae0821.L" ex_image="true" /><br /></p>';
tweets_b[10] = '<p><span style="font-size:18px;color:#777777;">在第一次选择坚强的时候，一定要想清楚：你是否做好了承受一切的准备。因为一旦你选择了坚强，即使只是假装的，你也必须一直坚持下去。因为你曾经的坚强会让人以为即使再大的苦，你也撑得住。</span></p><p><img onresizestart="cannot_resize_img(event);" src="http://pic.ibooloo.com/pic/get/1bcb5e698ed9612d001467cc74ae0821.L" ex_image="true" /><br /></p>'


test('next_word', function() { 
	var purge = new Purge(tweets_a[0]);
	
  equal(purge.next_word() , '<span style="color:#FF0000;">');
	equal(purge.next_word() , 'jgg');
	equal(purge.next_word() , '<span style="color:#0055FF;">');
	equal(purge.next_word() , 'hjsd');
	equal(purge.next_word() , '</span>');
	equal(purge.next_word() , '</span>');
	equal(purge.next_word() , '<span style="color:#0055FF;">');
	equal(purge.next_word() , 'fa');
	equal(purge.next_word() , '</span>');
	equal(purge.next_word() , '<br />');
	equal(purge.next_word() , '<a href="http://www.baidu.com">');
	equal(purge.next_word() , 'sdf');
	equal(purge.next_word() , '</a>');
	equal(purge.next_word() , 'a');
	equal(purge.next_word() , '<br />');
	equal(purge.next_word() , '<br />');
	equal(purge.next_word() , '<img src="http://192.168.101.99:81/pic/get/395800b0a9cfaec3dd71487ae0e4bb9e.L" ex_image="true" onresizestart="cannot_resize_img(event);" />');
	equal(purge.next_word() , '<br />');
	equal(purge.next_word() , 'adsfewfsd');
	equal(purge.next_word() , '<br />');
	equal(purge.next_word() , null);
});

test('last_match_sub',function() {
	equal(last_match_sub('style="color:#654321;"',/[';" ]color:\s*(#[0-9a-fA-F]+)/g,1),"#654321");     ////////'
	equal(last_match_sub('style="color:#123456;color:#654321;"',/[';" ]color:\s*(#[0-9a-fA-F]+)/g,1),"#654321");    ////////'
})

test("span",function() {
	equal((new SpanEle(null,'<span>')).color, null);
	equal((new SpanEle(null,'<span style="color:#ff0000">')).color, "#ff0000");
	equal((new SpanEle(null,'<span style="color:#ff0000;color:#00ff00;">')).color, "#00ff00");
	equal((new SpanEle(null,'<span style="color:#ff0000;font-size:12px">')).color, "#ff0000");
	equal((new SpanEle(null,'<span style="font-size:18px; color:#FF0000;">')).color, "#FF0000");
	
	equal((new SpanEle(null,'<span>')).size, null);
	equal((new SpanEle(null,"<span style='color:#ff0000;font-size:18px'>")).size, 18);
	equal((new SpanEle(null,'<span style="font-size:18px; color:#FF0000;">')).size, 18);
});

test("a",function() {
	equal((new AEle(null,'<a>')).href, null);
	equal((new AEle(null,'<a href="http://www.baidu.com">')).href, "http://www.baidu.com");
	equal((new AEle(null,"<a href='http://www.baidu.com' target='_blank'>")).href, "http://www.baidu.com");
});

test("p",function() {
	equal((new PEle(null,'<p>')).align, null);
	equal((new PEle(null,'<p align="center">')).align, 'center');
	equal((new PEle(null,'<p style="margin:0cm 0cm 0px;text-align:center;" class="MsoNormal">')).align, "center");
	equal((new PEle(null,'<p style="margin:0cm 0cm 0px; text-indent:28px; mso-char-indent-count:2.0;">')).indent, 2);
});

function ele2array (ele,arr) {
	arr.push(ele.ele_type);
	
	if (ele.children){
		var children = [];
		for (var i=0; i < ele.children.length; i++) {
			ele2array(ele.children[i],children);
		};

		arr.push(children);		
	}
	
	return arr;
}

test("purge tree",function() {
	var purge = new Purge("<span>asdf</span>");
	deepEqual(ele2array(purge.pur().tree_top, []), [
		"body",[
			"p",[
				"span",[
					"text"
				]
			]
		]
	]);
	
	var purge = new Purge("<span>asdf<span>zxcv</span></span>");
	deepEqual(ele2array(purge.pur().tree_top, []), [
		"body",[
			"p",[
				"span",[
					"text",
					"span",[
						"text"
					]
				]
			]
		]
	]);
	
	var purge = new Purge("<p><span>asdf</p><a >asdf</a></p>asdf");
	deepEqual(ele2array(purge.pur().tree_top, []), [
		"body",[
			"p",[
				"span",[
					"text"
				]
			],
			"p",[
				"a",[
					"span",[
						"text"
					]
				]
			],
			"p",[
				"span",[
					"text"
				]
			]
		]
	]);
	
	var purge = new Purge("<span>asdf<br /><span>zxcv</span></span>");
	deepEqual(ele2array(purge.pur().tree_top, []), [
		"body",[
			"p",[
				"span",[
					"text",
					"text",
					"span",[
						"text"
					]
				]
			]
		]
	]);
});

for (var i=0; i < tweets_a.length; i++) {
	

test("tweet "+i,function() {
	var i_ = i;
	return function() {
		var purge = new Purge(tweets_a[i_]);
		equal(purge.pur().serialize(),tweets_b[i_]);
	};
}());


};